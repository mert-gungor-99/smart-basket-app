<!doctype html>
<html lang="tr">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
Â  <title>Smart Basket â€¢ Market</title>

Â  Â  <link rel="manifest" href="./manifest.json?v=4" />
Â  <meta name="theme-color" content="#0a1110" />
Â  Â  <meta name="apple-mobile-web-app-capable" content="yes" />
Â  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
Â  <meta name="apple-mobile-web-app-title" content="Smart Basket" />
Â  <meta name="format-detection" content="telephone=no" />
Â  <link rel="apple-touch-icon" href="./icons/icon-192.png" />

Â  Â  <link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192.png" />
Â  <link rel="icon" type="image/png" sizes="512x512" href="./icons/icon-512.png" />

Â  <style>
Â  Â  :root{
Â  Â  Â  --bg:#0a1110; --bg2:#0b1413; --card:#0f1817;
Â  Â  Â  --muted:#8aa39b; --text:#eaf5f1;
Â  Â  Â  --primary:#16a34a; --primary-2:#22c55e; --accent:#f59e0b; --danger:#ef4444;
Â  Â  Â  --border:#17312c; --ring:#16a34a55;
Â  Â  Â  --safe-top: env(safe-area-inset-top, 0px);
Â  Â  Â  --safe-bottom: env(safe-area-inset-bottom, 0px);
Â  Â  Â  --svh: 1vh;
Â  Â  }
Â  Â  *{box-sizing:border-box; -webkit-tap-highlight-color: transparent}
Â  Â  html{height:100%; background:var(--bg); color-scheme: dark; overscroll-behavior-y: none;}
Â  Â  body{
Â  Â  Â  min-height:calc(max(100dvh, 100 * var(--svh)));
Â  Â  Â  margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; color:var(--text);
Â  Â  Â  background:
Â  Â  Â  Â  radial-gradient(1200px 600px at 80% -10%, #0a2f2150 0%, transparent 60%),
Â  Â  Â  Â  radial-gradient(900px 520px at -10% 20%, #134e3240 0%, transparent 55%),
Â  Â  Â  Â  linear-gradient(180deg, var(--bg2) 0%, var(--bg) 40%);
Â  Â  Â  background-attachment: fixed;
Â  Â  Â  display:flex; flex-direction:column; gap:16px; overflow-x:hidden;
Â  Â  Â  -webkit-user-select:none; user-select:none;
Â  Â  }
Â  Â  input, input::selection, textarea, textarea::selection { -webkit-user-select:text; user-select:text; }
Â  Â  ::selection{background:#16a34a55}

Â  Â  header{
Â  Â  Â  position:sticky; top:0; z-index:10; backdrop-filter:saturate(120%) blur(8px);
Â  Â  Â  background:color-mix(in oklab, #081210 86%, transparent);
Â  Â  Â  border-bottom:1px solid var(--border);
Â  Â  Â  padding-top:calc(8px + var(--safe-top));
Â  Â  }
Â  Â  .wrap{max-width:920px; margin:0 auto; padding:18px 20px}
Â  Â  .title{display:flex; align-items:center; gap:12px; margin:0 0 4px}
Â  Â  .title svg{width:28px; height:28px; color:var(--primary); filter:drop-shadow(0 2px 10px #16a34a55)}
Â  Â  .muted{color:var(--muted); font-size:14px}

Â  Â  .lang-switch{ margin-left:auto; display:flex; align-items:center; gap:8px; }
Â  Â  .flag{
Â  Â  Â  width:30px; height:22px; border-radius:6px; border:1px solid #1b3c33;
Â  Â  Â  background:#0c1513; cursor:pointer; display:grid; place-items:center;
Â  Â  Â  transition:transform .06s ease, border-color .18s ease, background .18s ease, filter .18s ease;
Â  Â  Â  touch-action: manipulation;
Â  Â  }
Â  Â  .flag:active{transform:scale(.96)}
Â  Â  .flag.active{border-color:#22c55e; box-shadow:0 0 0 4px #16a34a33}
Â  Â  .flag svg{width:22px; height:16px}

Â  Â  .card{
Â  Â  Â  background:color-mix(in oklab, var(--card) 90%, #071412);
Â  Â  Â  border:1px solid var(--border); border-radius:18px; padding:14px;
Â  Â  Â  box-shadow:0 10px 30px #00000040, inset 0 1px 0 #ffffff08;
Â  Â  Â  animation:card-in .45s cubic-bezier(.2,.7,.2,1);
Â  Â  }
Â  Â  @keyframes card-in{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}

Â  Â  .input-row{ display:grid; grid-template-columns:1.3fr .7fr auto; gap:10px; align-items:end; }
Â  Â  label{font-size:12px; color:var(--muted); display:block; margin:0 0 6px}
Â  Â  input[type="text"], input[type="number"]{
Â  Â  Â  width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border);
Â  Â  Â  background:#0c1513; color:var(--text); outline:none;
Â  Â  Â  transition:border-color .18s ease, box-shadow .18s ease, transform .06s ease;
Â  Â  Â  -webkit-appearance:none; appearance:none; touch-action: manipulation;
Â  Â  }
Â  Â  input:focus{ border-color:#1d5d45; box-shadow:0 0 0 6px var(--ring); transform:translateY(-1px); }
Â  Â  input::placeholder{color:#7fa399}

Â  Â  /* ---- Basma + Ripple ---- */
Â  Â  .pressable{ position:relative; overflow:hidden; }
Â  Â  .pressable:active{ transform:scale(.98); }
Â  Â  .ripple-ink{
Â  Â  Â  position:absolute; border-radius:50%; pointer-events:none;
Â  Â  Â  background:rgba(22,163,74,.25); transform:scale(0); opacity:1;
Â  Â  Â  animation:ripple .6s ease-out forwards; will-change:transform, opacity;
Â  Â  }
Â  Â  @keyframes ripple{ to{ transform:scale(1); opacity:0; } }

Â  Â  .btn{
Â  Â  Â  display:inline-flex; align-items:center; gap:8px; padding:12px 14px;
Â  Â  Â  border-radius:14px; border:1px solid #173e31;
Â  Â  Â  background:linear-gradient(180deg,#0f1f1a,#0c1915);
Â  Â  Â  color:#e9fff6; cursor:pointer; font-weight:800; letter-spacing:.2px;
Â  Â  Â  transition:transform .08s ease, filter .18s ease, border-color .18s ease, background .18s ease;
Â  Â  Â  will-change:transform; touch-action: manipulation;
Â  Â  }
Â  Â  .btn svg{width:18px; height:18px}
Â  Â  .btn:hover{border-color:#256c50; filter:brightness(1.06)}
Â  Â  .btn:active{transform:scale(.98)}
Â  Â  .btn.primary{ background:linear-gradient(180deg,#0f281f,#0b2019); border-color:#1b5f46; box-shadow:inset 0 1px 0 #ffffff10, 0 8px 18px #0b3b2a55; }
Â  Â  .btn.warn{ background:linear-gradient(180deg,#2b1f0a,#241a08); border-color:#7a5113; }

Â  Â  .items{display:flex; flex-direction:column; gap:10px; margin-top:12px}
Â  Â  .item{
Â  Â  Â  display:grid; grid-template-columns:auto 1fr auto auto auto; gap:10px; align-items:center;
Â  Â  Â  padding:12px 12px; border:1px solid #1b3c33; border-radius:14px;
Â  Â  Â  background:linear-gradient(180deg,#0c1614,#0a1412); animation:item-in .28s cubic-bezier(.21,.7,.18,1);
Â  Â  }
Â  Â  @keyframes item-in{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
Â  Â  .item.done{opacity:.6; text-decoration:line-through}
Â  Â  .pill{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid #1b3c33; color:#cbe5da; background:#0c1714}
Â  Â  .money{font-variant-numeric:tabular-nums; font-weight:800}

Â  Â  .ghost{
Â  Â  Â  background:transparent; border:1px solid #1b3c33; color:#d2efe3; border-radius:10px;
Â  Â  Â  padding:8px 10px; cursor:pointer; transition:transform .08s ease, border-color .18s ease, background .18s ease;
Â  Â  Â  touch-action: manipulation;
Â  Â  }
Â  Â  .ghost:hover{border-color:#2a6a54; background:#0e1d19}
Â  Â  .ghost:active{transform:scale(.97)}

Â  Â  footer.totals{
Â  Â  Â  position:sticky; bottom:0; z-index:8;
Â  Â  Â  background:color-mix(in oklab, #071512 88%, transparent);
Â  Â  Â  border-top:1px solid var(--border); backdrop-filter:saturate(120%) blur(8px);
Â  Â  Â  padding-bottom:calc(8px + var(--safe-bottom));
Â  Â  }
Â  Â  .totals-row{display:flex; align-items:center; justify-content:space-between; gap:16px}
Â  Â  .badge{ display:inline-flex; align-items:center; gap:6px; background:#0d1c17; border:1px solid #174b39;
Â  Â  Â  padding:8px 10px; border-radius:12px; font-weight:700}
Â  Â  .badge svg{width:16px; height:16px}
Â  Â  .total{
Â  Â  Â  display:flex; align-items:center; gap:12px; font-weight:900; font-size:18px;
Â  Â  Â  background:linear-gradient(180deg,#0f221c,#0b1915); border:1px solid #1a5a45; padding:10px 14px; border-radius:12px;
Â  Â  Â  box-shadow:inset 0 1px 0 #ffffff08, 0 6px 20px #03171280;
Â  Â  }

Â  Â  .toast{
Â  Â  Â  position:fixed; right:20px; bottom:calc(88px + var(--safe-bottom)); z-index:9999; display:none;
Â  Â  Â  background:#0b1f17; border:1px solid #1b3f32; color:#dfffee;
Â  Â  Â  padding:12px 14px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.35)
Â  Â  }
Â  Â  .toast.show{display:block; animation:slideup .35s ease}
Â  Â  @keyframes slideup{from{transform:translateY(12px); opacity:.4} to{transform:translateY(0); opacity:1}}

Â  Â  .sheet-backdrop{ position:fixed; inset:0; background:#00000088; display:none; z-index:50; }
Â  Â  .sheet{
Â  Â  Â  position:fixed; left:0; right:0; bottom:0; z-index:60;
Â  Â  Â  background:linear-gradient(180deg,#0e1916,#0a1311);
Â  Â  Â  border-top:1px solid #1a4a3a; box-shadow:0 -20px 40px #00000080;
Â  Â  Â  border-top-left-radius:18px; border-top-right-radius:18px;
Â  Â  Â  transform:translateY(110%); transition:transform .35s cubic-bezier(.2,.7,.2,1);
Â  Â  Â  will-change:transform;
Â  Â  }
Â  Â  .sheet.open{transform:translateY(0)}
Â  Â  .sheet .head{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:14px 18px; border-bottom:1px solid #123a2d;}
Â  Â  .drag{width:48px; height:4px; border-radius:999px; background:#285a47; margin:6px auto 10px}
Â  Â  .sheet .body{padding:8px 18px 18px}
Â  Â  .row{display:grid; grid-template-columns:1fr 1fr; gap:10px}
Â  Â  .sheet input{border-radius:12px; background:#0b1513; border:1px solid #184235}
Â  Â  .sheet .actions{display:flex; gap:10px; margin-top:12px; justify-content:flex-end}

Â  Â  .a2hs{
Â  Â  Â  position:fixed; left:12px; right:12px; bottom:calc(100px + var(--safe-bottom));
Â  Â  Â  background:#0e1916; color:#eaf5f1; border:1px solid #1b3f32; border-radius:14px;
Â  Â  Â  box-shadow:0 14px 32px rgba(0,0,0,.4); z-index:70; padding:10px 12px; display:none;
Â  Â  Â  animation:slideup .35s ease;
Â  Â  }
Â  Â  .a2hs strong{font-weight:800}
Â  Â  .a2hs .row{display:flex; align-items:center; justify-content:space-between; gap:12px}
Â  Â  .a2hs .hint{font-size:13px; color:#cfe9de}
Â  Â  .a2hs .close{background:transparent; border:1px solid #1b3c33; color:#cfe9de; border-radius:10px; padding:6px 8px; cursor:pointer}
Â  Â  .a2hs.show{display:block}

Â  Â  @media (max-width:640px){
Â  Â  Â  .wrap{padding:16px 14px}
Â  Â  Â  .input-row{grid-template-columns:1fr 1fr auto}
Â  Â  Â  .item{grid-template-columns:auto 1fr auto auto auto}
Â  Â  Â  .pill{display:none}
Â  Â  Â  .row{grid-template-columns:1fr}
Â  Â  }
Â  </style>
</head>
<body>
Â  <header>
Â  Â  <div class="wrap" style="display:flex; align-items:flex-start; gap:12px">
Â  Â  Â  <h1 class="title" style="margin-right:auto">
Â  Â  Â  Â  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
Â  Â  Â  Â  Â  <path d="M6 6h15l-2 8H8L6 2H2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  Â  Â  <circle cx="9" cy="21" r="1" fill="currentColor"/><circle cx="18" cy="21" r="1" fill="currentColor"/>
Â  Â  Â  Â  </svg>
Â  Â  Â  Â  <span id="appTitle">Smart Basket</span>
Â  Â  Â  Â  <span class="muted" id="tagline">â€¢ hÄ±zlÄ± ekle, iÅŸaretle, toplamÄ± gÃ¶r</span>
Â  Â  Â  </h1>

Â  Â  Â  <div class="lang-switch" aria-label="Language">
Â  Â  Â  Â  <button id="langTR" class="flag pressable" title="TÃ¼rkÃ§e" aria-label="TÃ¼rkÃ§e">
Â  Â  Â  Â  Â  <svg viewBox="0 0 640 480" aria-hidden="true">
Â  Â  Â  Â  Â  Â  <path fill="#e30a17" d="M0 0h640v480H0z"/><circle fill="#fff" cx="258.4" cy="240" r="76.8"/>
Â  Â  Â  Â  Â  Â  <circle fill="#e30a17" cx="278.4" cy="240" r="64"/>
Â  Â  Â  Â  Â  Â  <path fill="#fff" d="M335.7 240l51.8 16.8-32-44.2v54.8l32-44.2z"/>
Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button id="langEN" class="flag pressable" title="English" aria-label="English">
Â  Â  Â  Â  Â  <svg viewBox="0 0 60 40" aria-hidden="true">
Â  Â  Â  Â  Â  Â  <defs><clipPath id="c"><path d="M0,0H60V40H0z"/></clipPath></defs>
Â  Â  Â  Â  Â  Â  <g clip-path="url(#c)">
Â  Â  Â  Â  Â  Â  Â  <path fill="#b22234" d="M0 0h60v40H0z"/>
Â  Â  Â  Â  Â  Â  Â  <path stroke="#fff" stroke-width="6.666" d="M0 6.666h60M0 20h60M0 33.333h60"/>
Â  Â  Â  Â  Â  Â  Â  <rect width="24" height="16" fill="#3c3b6e"/>
Â  Â  Â  Â  Â  Â  Â  <g fill="#fff" transform="scale(.8) translate(2,2)">
Â  Â  Â  Â  Â  Â  Â  Â  <circle r="1.1" cx="3" cy="3"/><circle r="1.1" cx="7" cy="3"/><circle r="1.1" cx="11" cy="3"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle r="1.1" cx="5" cy="5"/><circle r="1.1" cx="9" cy="5"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle r="1.1" cx="3" cy="7"/><circle r="1.1" cx="7" cy="7"/><circle r="1.1" cx="11" cy="7"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle r="1.1" cx="5" cy="9"/><circle r="1.1" cx="9" cy="9"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle r="1.1" cx="3" cy="11"/><circle r="1.1" cx="7" cy="11"/><circle r="1.1" cx="11" cy="11"/>
Â  Â  Â  Â  Â  Â  Â  </g>
Â  Â  Â  Â  Â  Â  </g>
Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="wrap">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <div class="input-row">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label for="name" id="labelName">ÃœrÃ¼n adÄ±</label>
Â  Â  Â  Â  Â  Â  <input id="name" type="text" placeholder="Ã–rn: SÃ¼t 1L" autocomplete="off" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label for="price" id="labelPrice">Fiyat (â‚º)</label>
Â  Â  Â  Â  Â  Â  <input id="price" type="text" inputmode="decimal" placeholder="e.g., 12.99" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label style="visibility:hidden">.</label>
Â  Â  Â  Â  Â  Â  <button id="addBtn" class="btn primary pressable" title="Sepete ekle">
Â  Â  Â  Â  Â  Â  Â  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
Â  Â  Â  Â  Â  Â  Â  Â  <path d="M6 6h15l-2 8H8L6 2H2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  Â  Â  Â  Â  Â  <path d="M10 12l3 3 6-6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  <span id="btnAddText">Sepete Ekle</span>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="empty-placeholder" style="display: none; text-align: center; padding: 24px 16px; border: 2px dashed var(--border); border-radius: 14px; margin-top: 16px; color: var(--muted);">
          </div>

Â  Â  Â  Â  <div class="items" id="items"></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </header>

Â  <footer class="totals">
Â  Â  <div class="wrap totals-row">
Â  Â  Â  <div class="badge">
Â  Â  Â  Â  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
Â  Â  Â  Â  Â  <path d="M8 6h13l-2 8H9L7 2H2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
Â  Â  Â  Â  </svg>
Â  Â  Â  Â  <span id="count">0 Ã¼rÃ¼n</span>
Â  Â  Â  </div>
Â  Â  Â  <div class="total">
Â  Â  Â  Â  <span id="totalLabel">Toplam:</span>
Â  Â  Â  Â  <span class="money" id="total">â‚º0,00</span>
Â  Â  Â  Â  <button class="btn warn pressable" id="clearAll" title="Hepsini temizle"><span id="btnClearText">Temizle</span></button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </footer>

Â  <div id="toast" class="toast" role="status" aria-live="polite">Sepete eklendi</div>

Â  Â  <div id="sheetBackdrop" class="sheet-backdrop"></div>
Â  <section id="editSheet" class="sheet" aria-hidden="true">
Â  Â  <div class="drag"></div>
Â  Â  <div class="head">
Â  Â  Â  <strong id="editTitle">ÃœrÃ¼nÃ¼ DÃ¼zenle</strong>
Â  Â  Â  <button id="closeSheet" class="ghost pressable" title="Kapat"><span id="btnCloseText">Kapat âœ•</span></button>
Â  Â  </div>
Â  Â  <div class="body">
Â  Â  Â  <div class="row">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <label for="editName" id="editLabelName">ÃœrÃ¼n adÄ±</label>
Â  Â  Â  Â  Â  <input id="editName" type="text" placeholder="Ã–rn: SÃ¼t 1L" />
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <label for="editPrice" id="editLabelPrice">Fiyat (â‚º)</label>
Â  Â  Â  Â  Â  <input id="editPrice" type="text" inputmode="decimal" placeholder="e.g., 12.99" />
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div class="actions">
Â  Â  Â  Â  <button id="deleteItem" class="btn pressable" style="border-color:#5a1b1b;background:linear-gradient(180deg,#2a0e0e,#220b0b)"><span id="btnDeleteText">Sil</span></button>
Â  Â  Â  Â  <button id="saveItem" class="btn primary pressable"><span id="btnSaveText">Kaydet</span></button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </section>

Â  Â  <div id="a2hs" class="a2hs" role="dialog" aria-live="polite" aria-hidden="true">
Â  Â  <div class="row">
Â  Â  Â  <div class="hint">
Â  Â  Â  Â  <strong>Uygulama gibi kullan:</strong>
Â  Â  Â  Â  PaylaÅŸ â†’ <em>Ana Ekrana Ekle</em>
Â  Â  Â  </div>
Â  Â  Â  <button id="a2hsClose" class="close pressable">Kapat</button>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // ===== Para Birimi / Dil haritasÄ± =====
Â  Â  const CURRENCIES = {
Â  Â  Â  USD: { code:'USD', symbol:'$', locales:['en-US'] },
Â  Â  Â  TRY: { code:'TRY', symbol:'â‚º', locales:['tr-TR'] }
Â  Â  };

Â  Â  // Tercihler
Â  Â  let lang = localStorage.getItem('sb-lang');
Â  Â  let currencyCode = localStorage.getItem('sb-currency');

Â  Â  // BÃ¶lgeye gÃ¶re ilk kurulum
Â  Â  if(!lang || !currencyCode){
Â  Â  Â  const navLang = (navigator.language || 'en-US').toLowerCase();
Â  Â  Â  const region = navLang.split('-')[1] || '';
Â  Â  Â  if(region.toUpperCase() === 'TR'){
Â  Â  Â  Â  lang = 'tr'; currencyCode = 'TRY';
Â  Â  Â  }else if(region.toUpperCase() === 'US'){
Â  Â  Â  Â  lang = 'en'; currencyCode = 'USD';
Â  Â  Â  }else{
Â  Â  Â  Â  lang = lang || 'en'; currencyCode = currencyCode || 'USD';
Â  Â  Â  }
Â  Â  Â  localStorage.setItem('sb-lang', lang);
Â  Â  Â  localStorage.setItem('sb-currency', currencyCode);
Â  Â  }

Â  Â  document.documentElement.lang = lang;

Â  Â  // I18N
Â  Â  const I18N = {
Â  Â  Â  tr: {
Â  Â  Â  Â  appTitle: "Smart Basket",
Â  Â  Â  Â  tagline: "â€¢ hÄ±zlÄ± ekle, iÅŸaretle, toplamÄ± gÃ¶r",
Â  Â  Â  Â  labelName: "ÃœrÃ¼n adÄ±",
Â  Â  Â  Â  labelPrice: () => `Fiyat (${CURRENCIES[currencyCode].symbol})`,
Â  Â  Â  Â  phName: "Ã–rn: SÃ¼t 1L",
Â  Â  Â  Â  phPrice: () => CURRENCIES[currencyCode].code === 'TRY' ? "Ã–rn: 39,90" : "e.g., 12.99",
Â  Â  Â  Â  add: "Sepete Ekle",
Â  Â  Â  Â  emptyInline: "HenÃ¼z Ã¼rÃ¼n yok. ÃœrÃ¼n adÄ±nÄ± ve fiyatÄ±nÄ± yazÄ±p<br><strong>Sepete Ekle</strong>'ye bas.",
Â  Â  Â  Â  count: n => `${n} Ã¼rÃ¼n`,
Â  Â  Â  Â  totalLabel: "Toplam:",
Â  Â  Â  Â  clear: "Temizle",
Â  Â  Â  Â  clearConfirm: "TÃ¼m Ã¼rÃ¼nler silinsin mi?",
Â  Â  Â  Â  toastAdded: "Sepete eklendi",
Â  Â  Â  Â  toastUpdated: "GÃ¼ncellendi",
Â  Â  Â  Â  toastDeleted: "Silindi",
Â  Â  Â  Â  toggleAria: "SatÄ±n alÄ±ndÄ± olarak iÅŸaretle",
Â  Â  Â  Â  edit: "DÃ¼zenle",
Â  Â  Â  Â  delete: "Sil",
Â  Â  Â  Â  editTitle: "ÃœrÃ¼nÃ¼ DÃ¼zenle",
Â  Â  Â  Â  save: "Kaydet",
Â  Â  Â  Â  close: "Kapat âœ•",
Â  Â  Â  Â  dateLocale: "tr-TR",
Â  Â  Â  Â  a2hsHint: "Uygulama gibi kullan: PaylaÅŸ â†’ Ana Ekrana Ekle",
Â  Â  Â  Â  a2hsClose: "Kapat"
Â  Â  Â  },
Â  Â  Â  en: {
Â  Â  Â  Â  appTitle: "Smart Basket",
Â  Â  Â  Â  tagline: "â€¢ add fast, check off, see totals",
Â  Â  Â  Â  labelName: "Item name",
Â  Â  Â  Â  labelPrice: () => `Price (${CURRENCIES[currencyCode].symbol})`,
Â  Â  Â  Â  phName: "e.g., Milk 1L",
Â  Â  Â  Â  phPrice: () => CURRENCIES[currencyCode].code === 'TRY' ? "Ã–rn: 39,90" : "e.g., 12.99",
Â  Â  Â  Â  add: "Add to Basket",
Â  Â  Â  Â  emptyInline: "No items yet. Enter an item name and price,<br>then press <strong>Add to Basket</strong>.",
Â  Â  Â  Â  count: n => `${n} item${n===1?"":"s"}`,
Â  Â  Â  Â  totalLabel: "Total:",
Â  Â  Â  Â  clear: "Clear",
Â  Â  Â  Â  clearConfirm: "Delete all items?",
Â  Â  Â  Â  toastAdded: "Added to basket",
Â  Â  Â  Â  toastUpdated: "Updated",
Â  Â  Â  Â  toastDeleted: "Deleted",
Â  Â  Â  Â  toggleAria: "Mark as purchased",
Â  Â  Â  Â  edit: "Edit",
Â  Â  Â  Â  delete: "Delete",
Â  Â  Â  Â  editTitle: "Edit Item",
Â  Â  Â  Â  save: "Save",
Â  Â  Â  Â  close: "Close âœ•",
Â  Â  Â  Â  dateLocale: "en-US",
Â  Â  Â  Â  a2hsHint: "Use like an app: Share â†’ Add to Home Screen",
Â  Â  Â  Â  a2hsClose: "Close"
Â  Â  Â  }
Â  Â  };

Â  Â  // Formatter
Â  Â  let fmt = new Intl.NumberFormat(I18N[lang].dateLocale, {
Â  Â  Â  style:'currency', currency: CURRENCIES[currencyCode].code, minimumFractionDigits:2
Â  Â  });

Â  Â  // price parse
Â  Â  function parsePrice(v){
Â  Â  Â  if(typeof v !== 'string') return NaN;
Â  Â  Â  v = v.replace(/\s+/g,'').replace(/[â‚º$]/g,'').replace(',', '.');
Â  Â  Â  const n = parseFloat(v);
Â  Â  Â  return Number.isFinite(n) ? n : NaN;
Â  Â  }

Â  Â  // state
Â  Â  const storeKey = 'smart-basket-v1';
Â  Â  let items = JSON.parse(localStorage.getItem(storeKey) || '[]');
Â  Â  let editingIndex = null;

Â  Â  // els
Â  Â  const appTitleEl = document.getElementById('appTitle');
Â  Â  const taglineEl = document.getElementById('tagline');
Â  Â  const nameEl = document.getElementById('name');
Â  Â  const priceEl = document.getElementById('price');
Â  Â  const addBtn = document.getElementById('addBtn');
Â  Â  const addBtnText = document.getElementById('btnAddText');
Â  Â  const itemsEl = document.getElementById('items');
Â  Â  const emptyPlaceholder = document.getElementById('empty-placeholder');
Â  Â  const countEl = document.getElementById('count');
Â  Â  const totalEl = document.getElementById('total');
Â  Â  const totalLabelEl = document.getElementById('totalLabel');
Â  Â  const toastEl = document.getElementById('toast');
Â  Â  const clearAllBtn = document.getElementById('clearAll');
Â  Â  const btnClearText = document.getElementById('btnClearText'); // DÃœZELTME 1

Â  Â  const labelNameEl = document.getElementById('labelName');
Â  Â  const labelPriceEl = document.getElementById('labelPrice');

Â  Â  const sheet = document.getElementById('editSheet');
Â  Â  const sheetBackdrop = document.getElementById('sheetBackdrop');
Â  Â  const closeSheetBtn = document.getElementById('closeSheet');
Â  Â  const editNameEl = document.getElementById('editName');
Â  Â  const editPriceEl = document.getElementById('editPrice');
Â  Â  const saveItemBtn = document.getElementById('saveItem');
Â  Â  const deleteItemBtn = document.getElementById('deleteItem');

Â  Â  const editTitleEl = document.getElementById('editTitle');
Â  Â  const editLabelNameEl = document.getElementById('editLabelName');
Â  Â  const editLabelPriceEl = document.getElementById('editLabelPrice');
Â  Â  const btnSaveText = document.getElementById('btnSaveText');
Â  Â  const btnDeleteText = document.getElementById('btnDeleteText');
Â  Â  const btnCloseText = document.getElementById('btnCloseText');

Â  Â  const langTR = document.getElementById('langTR');
Â  Â  const langEN = document.getElementById('langEN');

Â  Â  const a2hs = document.getElementById('a2hs');
Â  Â  const a2hsClose = document.getElementById('a2hsClose');

Â  Â  function applyI18N(){
Â  Â  Â  const t = I18N[lang];
Â  Â  Â  document.documentElement.lang = lang;
Â  Â  Â  appTitleEl.textContent = t.appTitle;
Â  Â  Â  taglineEl.textContent = t.tagline;

Â  Â  Â  labelNameEl.textContent = t.labelName;
Â  Â  Â  labelPriceEl.textContent = t.labelPrice();
Â  Â  Â  nameEl.placeholder = t.phName;
Â  Â  Â  priceEl.placeholder = t.phPrice();

Â  Â  Â  addBtn.setAttribute('title', t.add);
Â  Â  Â  addBtnText.textContent = t.add;

Â  Â  Â  emptyPlaceholder.innerHTML = t.emptyInline;

Â  Â  Â  totalLabelEl.textContent = t.totalLabel;
Â  Â  Â  btnClearText.textContent = t.clear; // DÃœZELTME 2
Â  Â  Â  clearAllBtn.title = t.clear;

Â  Â  Â  editTitleEl.textContent = t.editTitle;
Â  Â  Â  editLabelNameEl.textContent = t.labelName;
Â  Â  Â  editLabelPriceEl.textContent = t.labelPrice();
Â  Â  Â  btnSaveText.textContent = t.save;
Â  Â  Â  btnDeleteText.textContent = t.delete;
Â  Â  Â  btnCloseText.textContent = t.close;

Â  Â  Â  fmt = new Intl.NumberFormat(t.dateLocale, { style:'currency', currency: CURRENCIES[currencyCode].code, minimumFractionDigits:2 });

Â  Â  Â  langTR.classList.toggle('active', lang === 'tr');
Â  Â  Â  langEN.classList.toggle('active', lang === 'en');

Â  Â  Â  if (a2hs) {
Â  Â  Â  Â  const [lead, rest] = t.a2hsHint.split(':');
Â  Â  Â  Â  a2hs.querySelector('.hint').innerHTML = `<strong>${lead}:</strong> ${rest || ''}`;
Â  Â  Â  Â  a2hsClose.textContent = t.a2hsClose;
Â  Â  Â  }
Â  Â  Â  render();
Â  Â  }

Â  Â  function setLang(newLang){
Â  Â  Â  if(!I18N[newLang]) return;
Â  Â  Â  lang = newLang;
Â  Â  Â  currencyCode = (newLang === 'tr') ? 'TRY' : 'USD';
Â  Â  Â  localStorage.setItem('sb-lang', lang);
Â  Â  Â  localStorage.setItem('sb-currency', currencyCode);
Â  Â  Â  applyI18N();
Â  Â  Â  toast(I18N[lang].toastUpdated);
Â  Â  }

Â  Â  langTR.addEventListener('click', ()=> setLang('tr'));
Â  Â  langEN.addEventListener('click', ()=> setLang('en'));

Â  Â  function render(){
Â  Â  Â  const t = I18N[lang];
Â  Â  Â  itemsEl.innerHTML = '';
Â  Â  Â  emptyPlaceholder.style.display = items.length === 0 ? 'block' : 'none';

Â  Â  Â  let sum = 0;
Â  Â  Â  items.forEach((it, idx) => {
Â  Â  Â  Â  sum += it.price;

Â  Â  Â  Â  const row = document.createElement('div');
Â  Â  Â  Â  row.className = 'item' + (it.done ? ' done' : '');
Â  Â  Â  Â  row.innerHTML = `
Â  Â  Â  Â  Â  <button class="ghost pressable" aria-label="${t.toggleAria}" data-act="toggle" data-idx="${idx}" title="${t.toggleAria}">âœ“</button>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div style="font-weight:800">${escapeHtml(it.name)}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:12px">${new Date(it.ts).toLocaleString(t.dateLocale)}</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <span class="pill money">${fmt.format(it.price)}</span>
Â  Â  Â  Â  Â  <button class="ghost pressable" aria-label="${t.edit}" data-act="edit" data-idx="${idx}" title="${t.edit}">âœï¸</button>
Â  Â  Â  Â  Â  <button class="ghost pressable" aria-label="${t.delete}" data-act="del" data-idx="${idx}" title="${t.delete}">ğŸ—‘ï¸</button>
Â  Â  Â  Â  `;
Â  Â  Â  Â  itemsEl.appendChild(row);
Â  Â  Â  });

Â  Â  Â  countEl.textContent = I18N[lang].count(items.length);
Â  Â  Â  totalEl.textContent = fmt.format(sum);
Â  Â  Â  localStorage.setItem(storeKey, JSON.stringify(items));
Â  Â  }

Â  Â  // Toast
Â  Â  let toastTimer = null;
Â  Â  function toast(msg){
Â  Â  Â  toastEl.textContent = msg || I18N[lang].toastAdded;
Â  Â  Â  toastEl.classList.add('show');
Â  Â  Â  clearTimeout(toastTimer);
Â  Â  Â  toastTimer = setTimeout(()=>toastEl.classList.remove('show'), 1400);
Â  Â  }

Â  Â  // Add
Â  Â  function addItem(){
Â  Â  Â  const t = I18N[lang];
Â  Â  Â  const name = (nameEl.value || '').trim();
Â  Â  Â  const price = parsePrice((priceEl.value || '').trim());
Â  Â  Â  if(!name){ nameEl.focus(); pulse(nameEl); return; }
Â  Â  Â  if(!Number.isFinite(price) || price < 0){ priceEl.focus(); pulse(priceEl); return; }

Â  Â  Â  const item = { name, price, done:false, ts: Date.now() };
Â  Â  Â  items.unshift(item);
Â  Â  Â  nameEl.value = ''; priceEl.value = '';
Â  Â  Â  nameEl.focus();
Â  Â  Â  render();
Â  Â  Â  toast(t.toastAdded);
Â  Â  }

Â  Â  function pulse(el){
Â  Â  Â  el.style.boxShadow = '0 0 0 6px var(--ring)';
Â  Â  Â  setTimeout(()=> el.style.boxShadow = '', 220);
Â  Â  }

Â  Â  // List actions
Â  Â  itemsEl.addEventListener('click', (e)=>{
Â  Â  Â  const btn = e.target.closest('button');
Â  Â  Â  if(!btn) return;
Â  Â  Â  const idx = +btn.dataset.idx;
Â  Â  Â  const act = btn.dataset.act;
Â  Â  Â  if(Number.isNaN(idx)) return;

Â  Â  Â  const t = I18N[lang];

Â  Â  Â  if(act === 'del'){
Â  Â  Â  Â  items.splice(idx,1);
Â  Â  Â  Â  render();
Â  Â  Â  Â  toast(t.toastDeleted);
Â  Â  Â  }else if(act === 'toggle'){
Â  Â  Â  Â  items[idx].done = !items[idx].done;
Â  Â  Â  Â  render();
Â  Â  Â  }else if(act === 'edit'){
Â  Â  Â  Â  openSheet(idx);
Â  Â  Â  }
Â  Â  });

Â  Â  addBtn.addEventListener('click', addItem);
Â  Â  nameEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') priceEl.focus(); });
Â  Â  priceEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') addItem(); });

Â  Â  clearAllBtn.addEventListener('click', ()=>{
Â  Â  Â  if(items.length===0) return;
Â  Â  Â  if(confirm(I18N[lang].clearConfirm)){ items = []; render(); }
Â  Â  });

Â  Â  // sheet
Â  Â  function openSheet(idx){
Â  Â  Â  editingIndex = idx;
Â  Â  Â  const it = items[idx];
Â  Â  Â  editNameEl.value = it.name;
Â  Â  Â  editPriceEl.value = it.price.toString();
Â  Â  Â  document.getElementById('editLabelPrice').textContent = I18N[lang].labelPrice();
Â  Â  Â  sheet.classList.add('open');
Â  Â  Â  sheetBackdrop.style.display = 'block';
Â  Â  Â  sheet.setAttribute('aria-hidden','false');
Â  Â  Â  setTimeout(()=> editNameEl.focus(), 50);
Â  Â  }
Â  Â  function closeSheet(){
Â  Â  Â  editingIndex = null;
Â  Â  Â  sheet.classList.remove('open');
Â  Â  Â  sheetBackdrop.style.display = 'none';
Â  Â  Â  sheet.setAttribute('aria-hidden','true');
Â  Â  }
Â  Â  sheetBackdrop.addEventListener('click', closeSheet);
Â  Â  closeSheetBtn.addEventListener('click', closeSheet);

Â  Â  saveItemBtn.addEventListener('click', ()=>{
Â  Â  Â  if(editingIndex===null) return;
Â  Â  Â  const t = I18N[lang];
Â  Â  Â  const name = (editNameEl.value || '').trim();
Â  Â  Â  const price = parsePrice((editPriceEl.value || '').trim());
Â  Â  Â  if(!name){ editNameEl.focus(); pulse(editNameEl); return; }
Â  Â  Â  if(!Number.isFinite(price) || price < 0){ editPriceEl.focus(); pulse(editPriceEl); return; }
Â  Â  Â  items[editingIndex].name = name;
Â  Â  Â  items[editingIndex].price = price;
Â  Â  Â  render();
Â  Â  Â  toast(t.toastUpdated);
Â  Â  Â  closeSheet();
Â  Â  });

Â  Â  deleteItemBtn.addEventListener('click', ()=>{
Â  Â  Â  if(editingIndex===null) return;
Â  Â  Â  const t = I18N[lang];
Â  Â  Â  items.splice(editingIndex,1);
Â  Â  Â  render();
Â  Â  Â  toast(t.toastDeleted);
Â  Â  Â  closeSheet();
Â  Â  });

Â  Â  // XSS guard
Â  Â  function escapeHtml(s){
Â  Â  Â  return String(s).replace(/[&<>"'`=\/]/g, c => ({
Â  Â  Â  Â  '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'
Â  Â  Â  }[c]));
Â  Â  }

Â  Â  // iOS helpers
Â  Â  function setSVH(){
Â  Â  Â  const vh = window.innerHeight * 0.01;
Â  Â  Â  document.documentElement.style.setProperty('--svh', `${vh}px`);
Â  Â  }
Â  Â  setSVH();
Â  Â  window.addEventListener('resize', setSVH);
Â  Â  window.addEventListener('orientationchange', setSVH);

Â  Â  function isIOS(){ return /iphone|ipad|ipod/i.test(navigator.userAgent); }
Â  Â  function isStandalone(){ return window.navigator.standalone === true; }
Â  Â  document.addEventListener('click', function(e){
Â  Â  Â  if(!isIOS() || !isStandalone()) return;
Â  Â  Â  const a = e.target.closest('a[href]');
Â  Â  Â  if(!a) return;
Â  Â  Â  const href = a.getAttribute('href');
Â  Â  Â  if(!href) return;
Â  Â  Â  const isHttp = href.startsWith('http://') || href.startsWith('https://') || href.startsWith('/');
Â  Â  Â  if(isHttp){ e.preventDefault(); window.location.href = href; }
Â  Â  }, { passive:true });

Â  Â  const A2HS_KEY = 'sb-ios-a2hs-dismissed';
Â  Â  function showA2HSIfNeeded(){
Â  Â  Â  if(!isIOS()) return;
Â  Â  Â  if(isStandalone()) return;
Â  Â  Â  if(localStorage.getItem(A2HS_KEY) === '1') return;
Â  Â  Â  a2hs?.classList.add('show');
Â  Â  Â  a2hs?.setAttribute('aria-hidden','false');
Â  Â  }
Â  Â  a2hsClose?.addEventListener('click', ()=>{
Â  Â  Â  localStorage.setItem(A2HS_KEY, '1');
Â  Â  Â  a2hs.classList.remove('show');
Â  Â  Â  a2hs.setAttribute('aria-hidden','true');
Â  Â  });

Â  Â  // Ripple
Â  Â  document.addEventListener('pointerdown', (e)=>{
Â  Â  Â  const el = e.target.closest('.pressable');
Â  Â  Â  if(!el) return;
Â  Â  Â  const rect = el.getBoundingClientRect();
Â  Â  Â  const size = Math.max(rect.width, rect.height) * 2;
Â  Â  Â  const ink = document.createElement('span');
Â  Â  Â  ink.className = 'ripple-ink';
Â  Â  Â  ink.style.width = ink.style.height = size + 'px';
Â  Â  Â  ink.style.left = (e.clientX - rect.left - size/2) + 'px';
Â  Â  Â  ink.style.topÂ  = (e.clientY - rect.topÂ  - size/2) + 'px';
Â  Â  Â  el.appendChild(ink);
Â  Â  Â  setTimeout(()=>ink.remove(), 650);
Â  Â  }, {passive:true});

Â  Â  // init
Â  Â  applyI18N();
Â  Â  showA2HSIfNeeded();

Â  Â  // SW
Â  Â  if ('serviceWorker' in navigator) {
Â  Â  Â  window.addEventListener('load', () => {
Â  Â  Â  Â  navigator.serviceWorker.register('./sw.js', { scope: './' }).catch(console.error);
Â  Â  Â  });
Â  Â  }
Â  </script>
</body>
</html>
